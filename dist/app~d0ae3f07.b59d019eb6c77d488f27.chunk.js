(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,i,t){t("GAND"),t("GmYv"),e.exports=t("b9nV")},EditIssue:function(e,i,t){"use strict";t.d(i,"a",function(){return o});var n,r=t("aurelia-dialog"),s=t("aurelia-framework"),a=t("Issue"),o=Object(s.e)(r.DialogController)(n=function(){function e(e){this.issue={},this.controller=e}var i=e.prototype;return i.activate=function(e){console.log(e),e&&(this.issue=e)},i.setIssueType=function(e){console.log(this.issue),console.log(e),this.issue.issueType=e},i.items=function(){return Object.keys(a.Issue.mapping)},i.getIssueTypeName=function(e){return a.Issue.mapping[e].name},i.getIssueTypeGlyph=function(e){return"fa fa-"+a.Issue.mapping[e].glyph},e}())||n},"EditIssue.html":function(e,i){e.exports='<template>\n  <ux-dialog>\n    <ux-dialog-body>\n      <h2>Issue</h2>\n      <input placeholder="title..." value.bind="issue.title">\n      <textarea placeholder="description..." style="width:calc(100% - 10px)" value.bind="issue.description"></textarea>\n      <div>\n        <span class.bind="(issue.issueType == issueType)? \'issueTypeOption selectedIssueType\' : \'issueTypeOption\'" repeat.for="issueType of items()" click.trigger="setIssueType(issueType)">\n          ${getIssueTypeName(issueType)} <span class.bind="getIssueTypeGlyph(issueType)"></span>\n        </span>\n      </div>\n    </ux-dialog-body>\n\n    <ux-dialog-footer>\n      <button click.trigger="controller.cancel()">Cancel</button>\n      <button click.trigger="controller.ok(issue)">Ok</button>\n    </ux-dialog-footer>\n  </ux-dialog>\n</template>\n'},Issue:function(e,i,t){"use strict";t.r(i),t.d(i,"Issue",function(){return b});var n,r,s,a,o,l,u,c=t("aurelia-framework"),d=t("M3lk"),p=t("aurelia-dialog"),g=t("EditIssue");function h(e,i,t,n){t&&Object.defineProperty(e,i,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(n):void 0})}function f(e,i,t,n,r){var s={};return Object.keys(n).forEach(function(e){s[e]=n[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=t.slice().reverse().reduce(function(t,n){return n(e,i,t)||t},s),r&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(r):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,i,s),s=null),s}var b=Object(c.e)(d.a,p.DialogService)((l=o=function(){function e(e,i){h(this,"issue",s,this),h(this,"selected",a,this),this.issueService=e,this.dialogService=i}var i=e.prototype;return i.getIssueTypeGlyph=function(i){return e.mapping[i].glyph},i.edit=function(){var e=this;this.dialogService.open({viewModel:g.a,model:JSON.parse(JSON.stringify(this.issue)),lock:!1}).whenClosed(function(i){i.wasCancelled||(i.output.dateUpdated=(new Date).toISOString(),e.issueService.updateIssue(i.output))})},e}(),o.GOOD="GOOD",o.BAD="BAD",o.IDEA="IDEA",o.QUESTION="QUESTION",o.mapping=((u={})[o.GOOD]={glyph:"thumbs-up",name:"Good"},u[o.BAD]={glyph:"thumbs-down",name:"Bad"},u[o.IDEA]={glyph:"lightbulb",name:"Idea"},u[o.QUESTION]={glyph:"question",name:"Question"},u),s=f((r=l).prototype,"issue",[c.c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=f(r.prototype,"selected",[c.c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n=r))||n},"Issue.html":function(e,i){e.exports='<template>\n  <div>${issue.title}</div>\n  \x3c!-- https://m.xkcd.com/2170/ --\x3e\n  <div>${issue.latlng.lat.toFixed(5)}, ${issue.latlng.lng.toFixed(5)}</div>\n  <div if.bind="selected">${issue.description}</div>\n  <i class.bind="\'fa fa-\' + getIssueTypeGlyph(issue.issueType)"></i>\n  <div if.bind="selected">${issue.author}</div>\n  <div if.bind="selected && issue.dateUpdated">Updated ${issue.dateUpdated}</div>\n  <div if.bind="selected && issue.dateCreated">Created ${issue.dateCreated}</div>\n  <button if.bind="selected" click.trigger="issueService.removeIssue(issue.id)">delete</button>\n  <button if.bind="selected" click.trigger="edit()">edit</button>\n</template>\n'},IssueList:function(e,i,t){"use strict";t.r(i),t.d(i,"IssueList",function(){return c});var n,r,s,a,o=t("aurelia-framework");function l(e,i,t,n){t&&Object.defineProperty(e,i,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(n):void 0})}function u(e,i,t,n,r){var s={};return Object.keys(n).forEach(function(e){s[e]=n[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=t.slice().reverse().reduce(function(t,n){return n(e,i,t)||t},s),r&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(r):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,i,s),s=null),s}var c=(r=u((n=function(){function e(){l(this,"selectedMarkerId",r,this),l(this,"selectMarker",s,this),l(this,"issues",a,this),this.selectedMarkerIdChanged=this.selectedMarkerIdChanged.bind(this)}return e.prototype.selectedMarkerIdChanged=function(){var e=this;setTimeout(function(){var i=document.getElementById("issueNum"+e.selectedMarkerId);i&&i.scrollIntoView({behavior:"smooth",block:"center"})},1)},e}()).prototype,"selectedMarkerId",[o.c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=u(n.prototype,"selectMarker",[o.c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=u(n.prototype,"issues",[o.c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n)},"IssueList.html":function(e,i,t){e.exports='<template>\n  <require from="./Issue"></require>\n  Issues\n    <Issue id.bind="\'issueNum\'+id" click.trigger="selectMarker({id:id})" selected.bind="id == selectedMarkerId" class.bind="(id == selectedMarkerId)? \'selected\' : \'unselected\'" repeat.for="[id, issue] of issues" issue.bind="issue"></Issue>\n</template>\n'},M3lk:function(e,i,t){"use strict";t.d(i,"a",function(){return n});var n=function(){function e(){this.issues=new Map,this.filteredIssues=new Map,this.nextId=0,this.updateCount=0}var i=e.prototype;return i.getIssues=function(){return this.issues},i.getIssue=function(e){return this.issues.get(e)},i.addIssue=function(e){return this.updateCount++,e.id=this.nextId++,this.issues.set(e.id,e),e.id},i.updateIssue=function(e){this.updateCount++,this.issues.set(e.id,e)},i.updateIssueLatLng=function(e,i){this.updateCount++,this.issues.get(e).latlng=i},i.removeIssue=function(e){this.updateCount++,this.issues.delete(e)},e}()},MapWidget:function(e,i,t){"use strict";t.r(i),t.d(i,"MapWidget",function(){return k});var n,r,s,a,o,l,u=t("4R65"),c=(t("pVzX"),t("qQke")),d=t("aurelia-framework"),p=t("VKKZ"),g=t("Issue"),h=t("M3lk"),f=(t("rco4"),t("EditIssue")),b=t("aurelia-dialog");function m(e,i,t,n,r,s,a){try{var o=e[s](a),l=o.value}catch(e){return void t(e)}o.done?i(l):Promise.resolve(l).then(n,r)}function v(e,i,t,n){t&&Object.defineProperty(e,i,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(n):void 0})}function y(e,i,t,n,r){var s={};return Object.keys(n).forEach(function(e){s[e]=n[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=t.slice().reverse().reduce(function(t,n){return n(e,i,t)||t},s),r&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(r):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,i,s),s=null),s}var k=Object(d.e)(c.a,h.a,d.b,b.DialogService)((s=y((r=function(){var e=i.prototype;function i(e,i,t,n){var r=this;v(this,"selectMarker",s,this),v(this,"selectedMarkerId",a,this),v(this,"issues",o,this),v(this,"bounds",l,this),this.map=void 0,this.activeRegion=void 0,this.markers=new Map,this.addMarker=function(e,i){var t=i.latlng;if(p.pointInLayer(t,r.activeRegion).length>0){var n,s=new u.marker(t,{draggable:"true",icon:r.getIcon(i)}).addTo(r.map);s.on("click",function(){r.selectMarker({id:e})}),s.on("dragend",function(i){0==p.pointInLayer(i.target._latlng,r.activeRegion).length?s.setLatLng(n):(r.markers.get(e).setLatLng(i.target._latlng),r.issues.get(e).latlng=i.target._latlng)}),s.on("dragstart",function(e){n=e.target._latlng}),r.markers.set(e,s)}else r.issueService.removeIssue(e)},this.dialogService=n,this.http=e,this.issueService=i,this.bindingEngine=t}return e.issuesChanged=function(){this.bindingEngine.collectionObserver(this.issues).subscribe(this.issuesCollectionChanged.bind(this))},e.issuesCollectionChanged=function(e){for(var i=0;i<e.length;i++){var t=e[i].type,n=e[i].key;if("delete"===t){var r=this.markers.get(n);r&&(r.remove(),this.markers.delete(n))}if("add"===t&&this.addMarker(n,this.issueService.getIssue(n)),"update"==t){var s=this.markers.get(n);s&&s.setIcon(this.getIcon(this.issues.get(n)))}}},e.selectedMarkerIdChanged=function(e,i){var t=this.markers.get(e);t&&t.setIcon(this.getIcon(this.issues.get(e)));var n=this.markers.get(i);n&&n.setIcon(this.getIcon(this.issues.get(i)))},e.addIssue=function(e){var i=this,t=new u.marker(e,{draggable:"true"}).addTo(this.map);this.dialogService.open({viewModel:f.a,lock:!1}).whenClosed(function(n){if(t.remove(),!n.wasCancelled){var r=i.issueService.addIssue({latlng:e,author:"author",title:n.output.title,description:n.output.description,dateCreated:(new Date).toISOString(),issueType:n.output.issueType});i.selectMarker({id:r})}})},e.attached=function(){var e,i=(e=regeneratorRuntime.mark(function e(){var i,t,n,r,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.map=u.map("map").setView([43.61,-116.19],13),u.control.locate().addTo(this.map),e.next=4,this.http.fetch("https://nominatim.openstreetmap.org/search.php?q=ada+county+Idaho&polygon_geojson=1&format=geojson");case 4:return i=e.sent,e.next=7,i.json();case 7:t=e.sent,this.activeRegion=u.geoJson(t,{style:{color:"#000",weight:1,opacity:1,fillOpacity:0}}),this.activeRegion.addTo(this.map),"http://{s}.tile.osm.org/{z}/{x}/{y}.png",this.map.addLayer(u.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{bounds:this.activeRegion.getBounds(),maxZoom:19,minZoom:4})),this.map.locate({enableHighAccuracy:!0,setView:!0,maxZoom:16}),this.map.on("move",function(e){s.bounds=s.map.getBounds()}),this.map.on("click",function(e){n=setTimeout(function(){r||s.addIssue(e.latlng),r=!1}.bind(s),300)}).on("dblclick",function(){clearTimeout(n),r=!0});case 15:case"end":return e.stop()}},e,this)}),function(){var i=this,t=arguments;return new Promise(function(n,r){var s=e.apply(i,t);function a(e){m(s,n,r,a,o,"next",e)}function o(e){m(s,n,r,a,o,"throw",e)}a(void 0)})});return function(){return i.apply(this,arguments)}}(),e.getIcon=function(e){var i=this.selectedMarkerId==e.id?"":"unselectedMarker";return u.Icon.Glyph.MDI=u.Icon.Glyph.extend({options:{prefix:"fas",iconUrl:"marker.png",shadowUrl:"shadow.png",iconAnchor:[24,48],shadowSize:[48,48],iconSize:[48,48],shadowAnchor:[0,28]}}),u.icon.glyph.mdi=function(e){return new u.Icon.Glyph.MDI(e)},u.icon.glyph.mdi({className:i,prefix:"fas",glyph:g.Issue.mapping[e.issueType].glyph,glyphSize:"18px",glyphAnchor:[0,-6]})},e.attachTooltipToMarker=function(e){e.bindTooltip("my tooltip text").openTooltip()},e.pointIsInVisibleMap=function(e){return this.map.getBounds().contains(e)},e.displayPopup=function(e){u.popup().setLatLng({lat:this.markers.get(e)._latlng.lat,lng:this.markers.get(e)._latlng.lng}).setContent(this.issues.get(e).description).openOn(this.map)},i}()).prototype,"selectMarker",[d.c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=y(r.prototype,"selectedMarkerId",[d.c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=y(r.prototype,"issues",[d.c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=y(r.prototype,"bounds",[d.c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n=r))||n},"MapWidget.html":function(e,i,t){e.exports='<template>\n  <require from="leaflet/dist/leaflet.css"></require>\n  <require from="leaflet.locatecontrol/dist/L.Control.Locate.min.css"></require>\n  <require from="app.css"></require>\n  <div class="overlay">\n    <div id=\'map\'></div>\n    <img class="overlayIcon" src="'+t("kZno")+'">\n    <div class="overlayedControls">\n      <button class="addButton" click.trigger="addIssue(map.getCenter())">+</button>\n    </div>\n  </div>\n\n</template>\n'},app:function(e,i,t){"use strict";t.r(i),t.d(i,"App",function(){return b});var n,r,s,a,o=t("aurelia-framework"),l=t("M3lk");function u(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c,d,p,g,h,f,b=(n=Object(o.e)(l.a),r=Object(o.d)("bounds","issueService.updateCount"),n((c=(a=function(){function e(e){var i=this;this.filtered=new Map,this.selectedMarkerId=void 0,this.selectMarker=function(e){i.issueService.getIssues().has(e)&&(i.selectedMarkerId=e)}.bind(this),this.issueService=e}var i,t,n;return i=e,(t=[{key:"filteredIssues",get:function(){if(this.bounds){var e=new Map,i=this.issueService.getIssues(),t=Array.isArray(i),n=0;for(i=t?i:i[Symbol.iterator]();;){var r;if(t){if(n>=i.length)break;r=i[n++]}else{if((n=i.next()).done)break;r=n.value}var s=r,a=s[0],o=s[1];this.bounds.contains(o.latlng)&&e.set(a,o)}var l=this.filtered,u=Array.isArray(l),c=0;for(l=u?l:l[Symbol.iterator]();;){var d;if(u){if(c>=l.length)break;d=l[c++]}else{if((c=l.next()).done)break;d=c.value}var p=d;a=p[0],o=p[1];e.has(a)||this.filtered.delete(a)}var g=e,h=Array.isArray(g),f=0;for(g=h?g:g[Symbol.iterator]();;){var b;if(h){if(f>=g.length)break;b=g[f++]}else{if((f=g.next()).done)break;b=f.value}var m=b;a=m[0],o=m[1];this.filtered.set(a,o)}}return this.filtered}}])&&u(i.prototype,t),n&&u(i,n),e}()).prototype,d="filteredIssues",p=[r],g=Object.getOwnPropertyDescriptor(a.prototype,"filteredIssues"),h=a.prototype,f={},Object.keys(g).forEach(function(e){f[e]=g[e]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=p.slice().reverse().reduce(function(e,i){return i(c,d,e)||e},f),h&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(c,d,f),f=null),s=a))||s)},"app.css":function(e,i,t){(e.exports=t("I1BE")(!1)).push([e.i," body, html {\n  width: 100%;\n  height: 100%;\n  margin: 0px;\n  font-family:Helvetica, Arial, sans-serif;\n  font-size: 14px;\n }\n\n.overlay {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n.overlayIcon {\n  display: block;\n  position: absolute;\n  top: calc(50% - 20px);\n  left: calc(50% - 20px);\n  z-index: 400;\n  width: 40px;\n  height: 40px;\n}\n.overlayedControls {\n  display: block;\n  position: absolute;\n  bottom: 40px;\n  right: 40px;\n  z-index: 400;\n}\n.addButton {\n  font-size: 40px;\n  height: 60px;\n  width: 60px;\n  border-radius: 60px;\n}\n#map {\n  width: 100%;\n  height: 100%;\n}\n.leaflet-interactive{\n  cursor: grab;\n}\n.leaflet-marker-draggable {\n  cursor: move !important;\n}\n.list {\n  vertical-align: top;\n  display: inline-block;\n  width: 250px;\n  min-height: calc(100% - 10px);\n  padding: 5px;\n  overflow: auto;\n}\n.map {\n  vertical-align: top;\n  display: inline-block;\n  width: calc(100% - 250px);\n  height: 100%;\n}\n.no4pxSpace {\n  height: 100%;\n  display: flex;\n}\n.leaflet-popup {\n  margin-bottom: 60px;\n}\nissue {\n  display: block;\n  margin-bottom: 5px;\n  padding: 10px;\n  cursor: pointer;\n  border-radius: 4px;\n}\n.selected {\n  background-color: rgba(117, 189, 248, 0.9);\n}\n.unselected {\n  background-color: rgba(78, 165, 70, 0.6);\n}\n.unselectedMarker {\n  -webkit-filter: hue-rotate(240deg) saturate(3.3) grayscale(50%);\n  filter: hue-rotate(240deg) saturate(3.3) grayscale(50%);\n}\n\n/* issue > * {\n  margin-bottom: 5px;\n}\nissue > *:last-child {\n  margin-bottom: 0px;\n} */\n.issueTypeOption {\n  width: 100px;\n  background-color: rgba(78, 165, 70, 0.6);\n  padding: 10px;\n  margin: 5px;\n  cursor: pointer;\n  display: inline-block;\n  width: 80px;\n  border-radius: 3px;\n}\n.selectedIssueType {\n  background-color: rgba(117, 189, 248, 0.9);\n}\n",""])},"app.html":function(e,i,t){e.exports='<template>\n  <require from="./MapWidget"></require>\n  <require from="./IssueList"></require>\n  <div class="no4pxSpace">\n    <issue-list class="list" select-marker.call="selectMarker(id)" selected-marker-id.to-view="selectedMarkerId" issues.bind="filteredIssues"></issue-list>\n    <map-widget class="map" bounds.from-view="bounds" select-marker.call="selectMarker(id)" selected-marker-id.bind="selectedMarkerId" issues.bind="filteredIssues"></map-widget>\n  </div>\n</template>\n'},kZno:function(e,i){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGHRFWHRTb2Z0d2FyZQBwYWludC5uZXQgNC4xLjVkR1hSAAAC80lEQVRYR83YS6hNURzH8Zs8IgMlA1yUDDySASPJnSDKQJJXFCEkQjdRcmJAJgwNTJAkpCQGHmHgMRElUhRy5R0GlMfF76v1r3/bn+5ajtq3PnXO7672/u1z9t5r7dPSaDSaZa28kK9yVoZKNC5LGBZYJj/ki7xMr+9JL4nGd1kYFngknTJReshFoeRcicZ3WRhmGiCUueWyRSnb5bIiYZiJc40yV1w2J2W7XVYkDDNFBRekbKfLioRhpuFCmXMuq1XBUUIZbi2W2Tm43WVFwjBTVNBuO1tdViQMM40RypxyWa0KjhfKnHDZipRtcVmRMMwUFVyXso0uKxKGmazgUZfVquBkocwhl1nBDS4rEoaZooKbU7bSZUXCMJMVPOCy/1awr/RLeM3KxFTHmmlCmX0ua3rBJfJA2OiffHM+yLvkvfB/X5AZhOyp3BZWOtecC3I+OSPcQ3FcOFXWCx/Sr4KrhY19l/vCBg3vKY7H8ix5LlYQn2S5WEHmYtaHdnAlOmQkG7PF5lSxHTRDN+ktdsr0l0FJq4xwxsq4pE2OCCUvs6GPwlf2z8vzJuLgeL7p5M1Joe0lmSczhBOfq9NMcJh7RycstYbJYKnuhE+vT8IOq///m1nCt9rBGz7yO+K//xKrxHawJmWRz8K3Bi6wVwmfGOf5a2Ec18RS22BPmS97hKsR++VgcliYaw1LK8PTGxvcIba9vSl7InflobBzu9Cs1FuxsrADuCGzpSk36sVSLcgBkk13WZEwzGQF+bOsVgWZLSjD7GGZFZzisiJhmCkqyGxAxh3Aj80Whpms4CaX1aogaz7KsAa0zApOclmRMMzEqrla8FjKWG37sdnCMFNUkHtlbQry5EYZHjUtq1VBnn2rBU+njId6PzZbGGaKCjIF1qYgUxxlFrqsVgW3CWX4NcGy6ykb4rIiYZhpplDmqrDoZc3IcwvLp9x14G/CMFN3uSmUfCMsl3jNr/7R+CxhWGCg8FTGr/ys89olGpep0fITeFlY21RGDnIAAAAASUVORK5CYII="},main:function(e,i,t){"use strict";t("LSZE"),t("ls82");var n={debug:!1,testing:!1};t("70NS");function r(e){e.use.standardConfiguration().plugin("aurelia-dialog").feature("resources/index"),e.use.developmentLogging(n.debug?"debug":"warn"),n.testing&&e.use.plugin("aurelia-testing"),e.start().then(function(){return e.setRoot("app")})}t.d(i,"configure",function(){return r})},"resources/index":function(e,i,t){"use strict";t.r(i),t.d(i,"configure",function(){return s});var n=t("4R65"),r=t.n(n);function s(e){}delete r.a.Icon.Default.prototype._getIconUrl,r.a.Icon.Default.mergeOptions({iconRetinaUrl:t("WE1v"),iconUrl:t("Y5fm"),shadowUrl:t("4rkx")})}},[[0,2,5,8,11,7,9,13,12,6,10,3,4,14]]]);
//# sourceMappingURL=app~d0ae3f07.b59d019eb6c77d488f27.bundle.map